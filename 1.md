# <span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(238, 249, 253)">(2023-10-22) CHEMFUZZ: Large Language Models-Assisted Fuzzing for Quantum Chemistry Software Bug Detection</span></span>

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(219, 238, 221)">Author:</span></span>**<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(219, 238, 221)"> Feng Qiu; Pu Ji; Baojian Hua; Yang Wang;</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(243, 250, 244)">Journal: (Publication Date: 2023-10-22)</span></span>**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(219, 238, 221)">Journal Tags:</span></span>**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(243, 250, 244)">Local Link: </span></span>**<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(243, 250, 244)"><a href="zotero://open-pdf/0_346AGHBG" rel="noopener noreferrer nofollow">Qiu 等 - 2023 - CHEMFUZZ Large Language Models-Assisted Fuzzing for Quantum Chemistry Software Bug Detection.pdf</a></span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(219, 238, 221)">DOI: </span></span>**<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(219, 238, 221)"><a href="https://doi.org/10.1109/QRS-C60940.2023.00104" rel="noopener noreferrer nofollow">10.1109/QRS-C60940.2023.00104</a></span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(243, 250, 244)">Abstract: </span></span>***<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(243, 250, 244)">Quantum chemistry software implements the first principle quantum computation and is indispensable in both scientific research and chemical industries. Any bugs in such software will lead to serious consequences, thus defeating its trustworthiness and reliability. However, bug detection techniques for such software have not been fully investigated. In this paper, to fill this gap, we propose a novel approach to fuzz quantum chemistry software with the aid of Large Lan guage Models (LLMs). Our basic idea is utilize LLMs to mu tate and generate syntactic and semantic valid input files from seed inputs, by proving valuable domain-specific knowledge of chemistry. With this basic idea, we have designed and im plemented CHEMFuzz, a fully automatic fuzzing framework to fuzz quantum chemistry software for bugs. Our evaluation of CHEMFuzz leverages popular LLMs including GPT3.5, Claude-2, and Bart as test oracles to generate parameters to mutate inputs and analyze computation results. CHEMFuzz detected 40 unique bugs, which have been classified and reported to developers, with a code coverage of 17.4%.</span></span>* |
| **<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(219, 238, 221)">Note Date: </span></span>**<span style="color: rgb(25, 60, 71)"><span style="background-color: rgb(219, 238, 221)">2024/8/15 21:00:10</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

## <span style="color: rgb(224, 255, 255)"><span style="background-color: rgb(102, 205, 170)">📜 Research Core</span></span>

***

> Tips: What was done, what problem was solved, innovations and shortcomings?

### ⚙️ Content

本文档的核心内容是介绍CHEMFuzz，一种通过大型语言模型（LLMs）辅助的量子化学软件模糊测试方法，旨在检测量子化学软件中的漏洞。CHEMFuzz通过使用LLMs来生成语法和语义上有效的输入文件，并分析计算结果，从而提高了漏洞检测的有效性。

### 💡 Innovations

**LLMs辅助的输入文件生成**：CHEMFuzz利用大型语言模型（如GPT3.5、Claude-2和Bart）生成语法和语义上有效的量子化学软件输入文件，解决了手动生成测试输入文件困难的问题。

**自动化模糊测试框架**：CHEMFuzz实现了一个全自动的模糊测试框架，无需手动干预或用户提示即可执行测试任务，并检测到40个独特的漏洞。

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2F346AGHBG%22%2C%22pageLabel%22%3A%22103%22%2C%22position%22%3A%7B%22pageIndex%22%3A0%2C%22rects%22%3A%5B%5B493.8472297000042%2C207.46535059999823%2C563.5183297000042%2C216.70315059999822%5D%2C%5B312.4272297000042%2C195.63535059999825%2C564.0069297000041%2C204.87315059999824%5D%2C%5B312.1972297000042%2C183.61535059999824%2C472.30372970000417%2C192.85315059999823%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22103%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/346AGHBG?page=1">“Our approach is end-to-end and automated: during testing, it requires neither manual interventions nor user prompts.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22103%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/E293C8XH">Qiu 等, 2023, p. 103</a></span>)</span>

**LLMs作为测试oracle**：CHEMFuzz利用LLMs不仅生成输入，还分析和验证量子化学软件的计算结果，显著提高了漏洞检测的准确性和覆盖率。

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2F346AGHBG%22%2C%22pageLabel%22%3A%22103%22%2C%22position%22%3A%7B%22pageIndex%22%3A0%2C%22rects%22%3A%5B%5B312.1972297000042%2C231.45535059999824%2C563.5244297000042%2C240.69315059999823%5D%2C%5B312.6772297000042%2C219.45535059999824%2C564.4781297000043%2C228.69315059999823%5D%2C%5B312.4272297000042%2C207.46535059999823%2C488.38152970000425%2C216.70315059999822%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22103%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/346AGHBG?page=1">“we have leveraged transformer-based Large Language Models (LLMs) as our testing oracles, to exploit their potentials of overcoming domain knowledge problems.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22103%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/E293C8XH">Qiu 等, 2023, p. 103</a></span>)</span>

### 🧩 Shortcomings

**LLMs生成的准确性**：虽然LLMs在生成有效输入文件方面表现出色，但偶尔会生成不准确的或无效的输入文件，影响模糊测试的效果。

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2F346AGHBG%22%2C%22pageLabel%22%3A%22110%22%2C%22position%22%3A%7B%22pageIndex%22%3A7%2C%22rects%22%3A%5B%5B158.74355980000178%2C349.3492502999987%2C297.8797598000017%2C358.8279502999987%5D%2C%5B46.72355980000177%2C337.36925029999867%2C297.65245980000157%2C344.8052502999987%5D%2C%5B46.72355980000177%2C325.49925029999866%2C297.73745980000183%2C332.9352502999987%5D%2C%5B46.58355980000177%2C313.58925029999864%2C297.6455598000018%2C321.0252502999987%5D%2C%5B46.73355980000177%2C301.58925029999864%2C179.02590980000178%2C309.0252502999987%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22110%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/346AGHBG?page=8">“we found that the main reason for the invalidity of seed files lies in the inability to understand the task requirements and objectives sometimes, resulting in issues such as missing output files, incorrect formatting, and reproducing the input as output”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22110%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/E293C8XH">Qiu 等, 2023, p. 110</a></span>)</span>

“

## <span style="color: rgb(32, 178, 170)"><span style="background-color: rgb(175, 238, 238)">🔁 Research Content</span></span>

***

### 💧 Data

研究数据包括Siesta 4.1.5软件的35个输入文件，这些文件用于评估CHEMFuzz的性能，并使用GPT3.5、Claude-2和Bart三个LLMs作为测试oracle。

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2F346AGHBG%22%2C%22pageLabel%22%3A%22108%22%2C%22position%22%3A%7B%22pageIndex%22%3A5%2C%22rects%22%3A%5B%5B311.28268000000435%2C196.94931060000093%2C562.7233300000046%2C206.28896060000093%5D%2C%5B311.4826800000044%2C185.00931060000093%2C530.6888300000045%2C192.44531060000094%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22108%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/346AGHBG?page=6">“We collected 35 input files from the examples and tests of the Siesta software to serve as initial seeds for our study.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22108%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/E293C8XH">Qiu 等, 2023, p. 108</a></span>)</span>

### 👩🏻‍💻 Method

CHEMFuzz提出了一种利用LLMs生成和优化量子化学软件输入文件的新方法，使用语法变异技术并结合领域知识生成新的测试用例，然后利用LLMs来分析计算结果并检测异常。

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2F346AGHBG%22%2C%22pageLabel%22%3A%22105%22%2C%22position%22%3A%7B%22pageIndex%22%3A2%2C%22rects%22%3A%5B%5B314.0263499000006%2C208.2505507999976%2C565.5139499000006%2C217.7034007999976%5D%2C%5B314.3963499000006%2C196.2338507999976%2C565.6520999000006%2C205.52635079999763%5D%2C%5B314.2363499000006%2C184.3038507999976%2C538.9658999000005%2C193.59635079999762%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22105%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/346AGHBG?page=3">“In this section, we present the design of CHEMFuzz, by describing its overall architecture (§ 4.1), then its two main modules: the mutation (§ 4.2) and the analysis (§ 4.3).”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22105%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/E293C8XH">Qiu 等, 2023, p. 105</a></span>)</span>

### 🔬 Experiment

实验部分展示了CHEMFuzz在Siesta 4.1.5中的表现，并与最先进的模糊测试工具进行了比较。实验结果表明，CHEMFuzz检测到40个独特的漏洞，并提高了代码覆盖率。

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2F346AGHBG%22%2C%22pageLabel%22%3A%22109%22%2C%22position%22%3A%7B%22pageIndex%22%3A6%2C%22rects%22%3A%5B%5B48.932660000000794%2C353.16469989999905%2C299.7756100000008%2C360.6006998999991%5D%2C%5B48.532660000000796%2C341.35469989999905%2C299.8020100000008%2C348.7906998999991%5D%2C%5B48.31266000000079%2C329.35469989999905%2C296.31321000000077%2C338.69519989999907%5D%2C%5B48.55266000000079%2C317.34469989999906%2C299.4709600000008%2C324.7806998999991%5D%2C%5B48.49266000000079%2C305.41469989999905%2C299.48046000000073%2C312.8506998999991%5D%2C%5B48.572660000000795%2C293.47469989999905%2C299.5547100000009%2C300.9106998999991%5D%2C%5B48.48266000000079%2C281.58469989999907%2C299.32931000000076%2C289.0206998999991%5D%2C%5B48.23266000000079%2C269.53469989999905%2C299.8220100000008%2C276.9706998999991%5D%2C%5B48.572660000000795%2C257.5146998999991%2C84.94576000000083%2C264.9506998999991%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22109%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/346AGHBG?page=7">“CHEMFuzz, in version 4.1.5 of the Siesta software package, has detected 40 bugs that were previously unknown to Siesta developers. Table II presents the statistics of these bugs de tected by CHEMFuzz. Various bugs were identified, including 5 file parse error, 3 stack overflow, 9 integer overflow, 4 endless Loop condition errors, 14 parameter validation errors, and 3 bugs that could not be attributed to a specific cause. We have reported all the bugs to the developers of the Siesta software.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14718694%2Fitems%2FE293C8XH%22%5D%2C%22locator%22%3A%22109%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/E293C8XH">Qiu 等, 2023, p. 109</a></span>)</span>

### 📜 Conclusion

研究总结了CHEMFuzz在利用LLMs辅助的模糊测试方面的显著优势，并提出了未来可能的改进方向，如进一步优化LLMs的生成准确性。

## <span style="color: rgb(0, 77, 153)"><span style="background-color: rgb(135, 206, 250)">🤔 Personal Summary</span></span>

***

> 1.  **问题**: CHEMFuzz是如何利用大型语言模型（LLMs）生成和优化量子化学软件的输入文件的？**解答**: CHEMFuzz通过结合<span style="background-color: #ffd40080">语法变异技术</span>和领域知识生成新的测试用例，并利用LLMs对这些用例进行语法和语义分析，从而生成有效的输入文件。它的关键在于LLMs能够自动生成符合领域知识的测试输入，减少了人工干预的需求。
>
> 2.  **问题**: 在CHEMFuzz中，LLMs如何被用作测试Oracle，它们如何帮助识别量子化学软件中的异常？**解答**: LLMs在CHEMFuzz中用于分析计算结果，并检测是否存在异常。通过对计算结果的分析，LLMs可以识别出不符合预期的输出，从而帮助检测潜在的漏洞。这些模型的训练数据和推理能力使它们能够识别出<span style="background-color: #ffd40080">语法和语义上的问题</span>。
>
> 3.  **问题**: 为什么在模糊测试中，代码覆盖率是一个重要的指标？如何解释CHEMFuzz的代码覆盖率和功能覆盖率？**解答**: <span style="background-color: #ffd40080">代码覆盖率</span>指的是在测试过程中<span style="background-color: #ffd40080">被执行的代码行数的比例</span>，是评估测试有效性的重要指标。高代码覆盖率通常意味着测试覆盖了更多的<span style="background-color: #ffd40080">程序路径</span>，增加了发现潜在漏洞的机会。CHEMFuzz在Siesta 4.1.5上的实验结果显示，它能够覆盖17.43%的代码行和32.42%的功能，证明其在漏洞检测中的有效性。

###

### 1. 文献处理分析：`CHEMFUZZ: Large Language Models-Assisted Fuzzing for Quantum Chemistry Software Bug Detection`

#### 1.1 序号 + 文章名称

序号: 2\
文章名称: *CHEMFUZZ: Large Language Models-Assisted Fuzzing for Quantum Chemistry Software Bug Detection*

#### 1.2. 查看是否在GitHub或其他网站存在相应代码

代码存在性: 未提及具体的代码托管链接。文中未提到代码在GitHub或其他平台上的发布信息。

#### 1.3. 区分对LLM进行Fuzz还是用LLM辅助Fuzz

该文献使用LLM辅助fuzzing，用LLM来生成和变异输入文件，并分析计算结果。

#### 1.4. 每个fuzz的生成测试样例是什么，对象是什么，和生成策略

*   生成的测试样例: 量子化学软件的输入文件（例如Siesta的输入文件）。

*   测试对象: 量子化学软件，特别是Siesta 4.1.5版本。

*   生成策略:

    *   变异策略：使用LLM对输入文件进行语法和语义上的变异，生成新的测试样例。
    *   输入生成：基于LLM生成输入文件中的参数，通过增加、删除或修改特定的部分来生成新的测试样例。
    *   结果分析：使用LLM分析量子化学软件生成的计算结果，识别异常情况。

#### 1.5. 若是Fuzz for LLM，请注明测试的是LLM哪一部分

该文献未涉及对LLM的fuzzing。

#### 1.6. 若是LLM for Fuzz，请注明LLM在Fuzz中发挥了什么作用

LLM在fuzzing中主要用于生成和变异输入文件，并在结果分析中作为判定oracle，识别潜在的异常数据或计算结果中的错误。
